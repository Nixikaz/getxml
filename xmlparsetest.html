<!DOCTYPE html>
<html>

<head>

</head>

<body>
    <p id="HV-FRF2"></p>
    <p id="HV4-ASSY-B"></p>
    <p id="HV5-BBOND1"></p>
    <p id="HV5-ASSY-F"></p>
    <p id="demo5">asdfas</p>
    <p id="demo6"></p>
    <p id="demo7"></p>
    <p id="demo8"></p>
    <p id="demo9"></p>
    <p id="demo10"></p>
    <p id="demo11"></p>
    <p id="demo12"></p>
    <p id="demo13"></p>
    <p id="demo14"></p>
    <p id="demo15"></p>
    <p id="demo16"></p>
    <p id="demo17"></p>
    <script type='text/javascript'>
        const stageArray = ["HV-FRF2", "HV4-ASSY-B", "HV5-BBOND1",
            "HV5-ASSY-F", "HV-FSBOND1", "HV6QX-INI", "HV6QX-PBI", 
            "HV-CLEAN", "HV-ENCAPQC", "HV-ENCAP2", "HV-SOLDER", 
            "HV5-LIDTAC", "HV6QX-FIN", "HV-UNDERFL", "HV-ROUTER",
            "HV-FINQC", "HV-FINLQC"];
        var txt = "";
        function xRequest(stage, url) {
            xhttp = false;

            xhttp = new XMLHttpRequest();

            if (!xhttp) {
                alert('Cannot create an XMLHTTP instance');
                return false;
            }
            xhttp.onreadystatechange = function () {
                if (xhttp.readyState == 4 && xhttp.status == 200) {
                    getXml(stage, this);
                }
            };
            xhttp.open('GET', url + ((/\?/).test(url) ? "&" : "?") + (new Date()).getTime(), true);
            xhttp.send(null);
        }

        function getXml(stage, xml) {
            var xmldoc = xml.responseXML;
            var partCount = 0;
            var stageNode = xmldoc.getElementsByTagName('stage');
            for (let i = 0; i < stageNode.length; i++) {
                let stageTextContent = stageNode[i].childNodes[0].textContent;
                if (stageTextContent === stage) {
                    partCount++;
                    
                }
                console.log(partCount);
                // console.log(stageTextContent);
                // document.getElementById(stageTextContent).innerHTML = partCount;
            }

        }

        function arrayLoop(array) {
            for (let i = 0; i < array.length; i++) {
                let loopVar = array[i];
                return loopVar;
                // console.log(loopVar);        
                // Below should be changed to appendChild or change text or whatever it takes to change HTML
                // document.getElementById(loopVar).innerHTML = loopVar; 
                }
            }
        console.log(xRequest(arrayLoop(stageArray), 'test.xml'));
// arrayLoop(stageArray);




// stageArray.forEach(str => {        
//         if (str == stageArray[i]) {
//             document.getElementById("demo" + i).innerHTML = str;
//         } else if (str == stageArray[1]) {
//             document.getElementById("demo2").innerHTML = str;
//         } else if (str == stageArray[2]) {
//             document.getElementById("demo3").innerHTML = str;
//         } else if (str == stageArray[3]) {
//             document.getElementById("demo4").innerHTML = str;
//         } else if (str == stageArray[4]) {
//             document.getElementById("demo5").innerHTML = str;
//         }        
// });

// wgxpath.install();
// // var xmlString = '<form><name>test</name></form>';
// var requestURL = 'EfficiencyDashboard.xml'
// var xhttp = new XMLHttpRequest();
// xhttp.open('GET', requestURL, true);
// xhttp.send();
// xhttp.onreadystatechange = function() {
//     if (this.readyState == 4 && this.status == 200) {
//         showResult(xhttp.responseXML);
//     }
// };

// function showResult(xml) {
//     var txt = "";
//     path = "/NewDataSet/Table/STAGE"
//     if (xml.evaluate) {
//         var nodes = xml.evaluate(path, xml, null, XPathResult.ANY_TYPE, null);
//         var result = nodes.iterateNext();
//         while (result) {
//             txt += result.childNodes[0].nodeValue + "<br>";
//             result = nodes.iterateNext();
//         }
//     }
//     document.getElementById("demo").innerHTML = txt;
// }

// var doc = new DOMParser().parseFro(xmlString, 'text/xml');
// var result = doc.evaluate('/form/name', doc, null, XPathResult.STRING_TYPE, null);
// console.log(result.stringValue);

    </script>
</body>

</html>